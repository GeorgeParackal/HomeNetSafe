<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/app.css') }}"
    />
<title>HomeNetSafe</title>
</head>

<body>
  <!-- Top bar with small logo on the LEFT -->
  <div class="topbar">
    <div class="container row" style="padding:10px 16px">
      <div class="brand">
        <div class="cube">üõ°Ô∏è</div>
        <div>
          <h1>HomeNetSafe</h1>
          <div class="muted">Simple local network UI</div>
        </div>
      </div>
      <div class="muted">v1 ‚Ä¢ minimal demo</div>
    </div>
  </div>

  <div class="container">
    <!-- Tabs (only 3) -->
  <input type="radio" name="tabs" id="tab-devices" checked>
  <input type="radio" name="tabs" id="tab-killswitch">
  <input type="radio" name="tabs" id="tab-settings">

    <div class="tabs">
      <div class="tab-labels">
        <label class="tab-label" for="tab-devices">Devices</label>
        <label class="tab-label" for="tab-killswitch">Killswitch</label>
        <label class="tab-label" for="tab-settings">Settings</label>
      </div>
    </div>

    <div class="panes">
      <!-- ===== HOME: big centered 3D logo (clickable) ===== -->
            <!-- Device registration modal -->
      <div id="registerModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:101;background:rgba(0,0,0,0.55);">
        <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--panel);border-radius:16px;padding:32px 24px;min-width:320px;max-width:90vw;box-shadow:0 0 32px #0008;">
          <!-- <h2 style="margin-top:0;color:var(--accent);font-size:22px;text-align:center;">Register Device</h2>
            -->
          <h2 class="h2-header">Register Device</h2>
          <form id="registerForm" style="margin-top:20px;">
            <input type="hidden" id="regDeviceMac">
            <div style="margin-bottom:16px;">
              <label style="display:block;margin-bottom:8px;color:var(--muted);">Custom Name</label>
              <input type="text" id="regDeviceName" style="width:100%;padding:8px;border-radius:8px;border:1px solid var(--line);background:var(--bg);color:var(--ink);" required>
            </div>
            <div style="margin-bottom:16px;">
              <label style="display:block;margin-bottom:8px;color:var(--muted);">Notes</label>
              <textarea id="regDeviceNotes" style="width:100%;padding:8px;border-radius:8px;border:1px solid var(--line);background:var(--bg);color:var(--ink);min-height:80px;"></textarea>
            </div>
            <div style="text-align:center;margin-top:24px;">
              <button type="submit" style="padding:8px 24px;border-radius:8px;background:var(--accent);color:#032c33;font-weight:700;border:none;cursor:pointer;margin-right:12px;">Register</button>
              <button type="button" onclick="document.getElementById('registerModal').style.display='none'" style="padding:8px 24px;border-radius:8px;background:#666;color:var(--ink);font-weight:700;border:none;cursor:pointer;">Cancel</button>
            </div>
          </form>
        </div>
      </div>

      <!-- ===== DEVICES (output of discovered devices) ===== -->
      <section id="pane-devices" class="pane">
        <div class="card">
          <strong>Discovered Devices</strong>
              <div id="scanFailMsg" style="display:none;color:#ff3b3b;font-weight:700;text-align:center;margin:24px 0 18px;font-size:18px;">Scan failed. No devices found.</div>
              <div id="devicesTableWrap" style="overflow:auto;margin-top:10px;">
                <table id="devicesTable" style="width:100%;border-collapse:collapse">
              <colgroup>
                <col style="width:10%"> <!-- Status -->
                <col style="width:15%"> <!-- Name -->
                <col style="width:12%"> <!-- IP -->
                <col style="width:15%"> <!-- MAC -->
                <col style="width:15%"> <!-- Vendor -->
                <col style="width:12%"> <!-- First seen -->
                <col style="width:12%"> <!-- Last seen -->
                <col style="width:9%">  <!-- Action -->
              </colgroup>
              <thead>
                    <tr style="background:rgba(0,229,255,.08);">
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">Status</th>
                      <th style="text-align:left;padding:12px 8px;font-weight:600;">Name</th>
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">IP</th>
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">MAC</th>
                      <th style="text-align:left;padding:12px 8px;font-weight:600;">Vendor</th>
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">First seen</th>
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">Last seen</th>
                      <th style="text-align:center;padding:12px 8px;font-weight:600;">Action</th>
                    </tr>
              </thead>
              <tbody id="devicesBody">
                    <!-- Device rows will be injected here -->
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ===== KILLSWITCH (placeholder) ===== -->
      <section id="pane-killswitch" class="pane">
        <div class="card center">
          <strong>Killswitch</strong>
          <div class="muted" style="margin-top:10px">This will reset the network in case of failure.<br>Feature coming soon.</div>
        </div>
      </section>

      <!-- ===== SETTINGS (tiny) ===== -->
      <section id="pane-settings" class="pane">
        <div class="grid grid-2">
          <div class="card">
            <strong>Preferences</strong>
            <div style="height:8px"></div>
            <div class="row"><span class="muted">Show tips</span><button class="btn-ghost" onclick="toggle(this)">On</button></div>
            <div class="row" style="margin-top:8px"><span class="muted">Auto-scan new devices</span><button class="btn-ghost" onclick="toggle(this)">Off</button></div>
          </div>
          <div class="card">
            <strong>About</strong>
            <p class="muted" style="margin-top:8px">Static front-end demo. No third-party references. Designed to be clear and simple.</p>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- ===== Fullscreen overlay for code rain transition ===== -->
  <!-- ===== Instruction Modal ===== -->
  <div id="instructionModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:101;background:rgba(0,0,0,0.55);">
    <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--panel);border-radius:16px;padding:32px 24px;min-width:320px;max-width:90vw;box-shadow:0 0 32px #0008;">
      <h2 style="margin-top:0;color:var(--accent);font-size:22px;text-align:center;">Instructions</h2>
      <div style="color:var(--ink);font-size:16px;line-height:1.7;margin:18px 0 0;">
        <ul>
          <li>Click the big logo to scan your network for devices.</li>
          <li>View discovered devices in the Devices tab.</li>
          <li>If the scan fails, you will see an error message.</li>
          <li>Use the Killswitch tab to reset your network (coming soon).</li>
          <li>Contact us via email for support or questions.</li>
        </ul>
      </div>
      <div style="text-align:center;margin-top:18px;">
        <button onclick="document.getElementById('instructionModal').style.display='none'" style="padding:8px 24px;border-radius:8px;background:var(--accent);color:#032c33;font-weight:700;border:none;cursor:pointer;">Close</button>
      </div>
    </div>
  </div>
  <!-- ===== Footer ===== -->
  <footer style="width:100%;background:var(--panel);border-top:1px solid var(--line);padding:18px 0 12px;position:fixed;bottom:0;left:0;z-index:99;text-align:center;">
    <div style="margin-bottom:8px;color:var(--muted);font-size:15px;">
      Questions? Contact us at <a href="mailto:support@homenetsafe.com" style="color:var(--accent);text-decoration:none;font-weight:600;">support@homenetsafe.com</a>
    </div>
    <button onclick="document.getElementById('instructionModal').style.display='block'" style="padding:10px 28px;border-radius:10px;background:var(--accent);color:#032c33;font-weight:700;border:none;cursor:pointer;font-size:16px;box-shadow:0 2px 8px #00e5ff22;">Instructions</button>
  </footer>
  <div id="matrixOverlay" aria-hidden="true">
    <canvas id="matrixCanvas"></canvas>
    <div id="matrixText"></div>
  </div>

  <!-- ===== Scan Result Modal ===== -->
  <div id="scanResultModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100;background:rgba(0,0,0,0.55);">
    <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--panel);border-radius:16px;padding:32px 24px;min-width:320px;max-width:90vw;box-shadow:0 0 32px #0008;">
      <h2 style="margin-top:0;color:var(--accent);font-size:22px;text-align:center;">Scan Result</h2>
      <pre id="scanResultText" style="background:#061017;color:#eaffff;padding:16px;border-radius:10px;max-height:40vh;overflow:auto;font-size:15px;white-space:pre-wrap;word-break:break-word;margin:18px 0 0;text-align:left;"></pre>
      <div style="text-align:center;margin-top:18px;">
        <button onclick="document.getElementById('scanResultModal').style.display='none'" style="padding:8px 24px;border-radius:8px;background:var(--accent);color:#032c33;font-weight:700;border:none;cursor:pointer;">Close</button>
      </div>
    </div>
  </div>

  {{temp_var}}

   <script
      type="text/javascript"
      src="{{ url_for('static', filename='js/app.js') }}">
    </script>
</body>
</html>